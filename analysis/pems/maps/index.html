
<!DOCTYPE html>
<html>
<head>
	
	<title>PEMS stations fundamental diagrams</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.1.0/dist/leaflet.css" integrity="sha512-wcw6ts8Anuw10Mzh9Ytw4pylW8+NAD4ch3lqm9lzAsTxg0GFeJgoAtxuCLREZSC5lUXdVyo/7yfsqFjQ4S+aKw==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.1.0/dist/leaflet.js" integrity="sha512-mNqn2Wg7tSToJhvHcqfzLMU6J4mkOImSPTxVZAdo+lcPlk+GhZmYgACEe0x35K7YzW1zJ7XyJV/TT1MrdXvMcA==" crossorigin=""></script>


	
</head>
<body>

    <h1>PEMS stations fundamental diagrams</h1>

    Clark Fitzgerald

    <br>

Analysis currently consists of the following steps:
<ol>
  <li>Download 10 months worth of 30 second PEMS sensor data for the Bay Area, about 130 GB.</li>
  <li>Separate them into groups based on station. </li>
  <li>Fit a (naive) fundamental diagram to the second lane of the freeway
      by using two robust linear models for each station: One for data with
      occupancy less than 0.15 and one for greater. This approximates
      minimizing the L1 loss as in 
      <a href="http://trrjournalonline.trb.org/doi/abs/10.3141/2260-06">Li and Zhang's 2011 paper</a>.
  </li>
  <li>Throw out on/off ramp stations and those with problems such as no
      observations, excessive standard error, or positive congested slopes.
      This reduces the number of stations from 3720 to 1438.</li>
  <li>Then these 4 parameters: slope and intercept for congested and
      uncongested, were used as the inputs to a kmeans clustering. I didn't
  discover any reasonable clusters.</li>
</ol>

    <br>
    <br>
    The lines below come from the stations on I80 west of the Carquinez
    Bridge and northeast of Hercules.
    <br>
    <br>
    <img src="carquinez_fd.svg" alt="Typical Fundamental Diagram">
    <br>
    <br>
    Theoretically, each line should pass through the point (1, 0). 
    Thinking further, it might be the case that for many stations there are
    relatively few observations in the area of high density. This can bias
    results since the fundamental diagram isn't truly linear. Also the
    variance in flow may depend on the occupancy.
    <br>
    <br>
    The circles plotted below correspond to different values for the congested slope in
    the triangular fundamental diagram.
    Green means the line is steeply negative, so
    congestion should clear quickly. Red means the line is more flat, meaning
    congestion takes more time to clear.
    <br>
    <br>
    What's going on with the Bay Bridge? These points are right next to
    each other, yet they have very different values.
    <br>
    <br>
    Zoom in and click on the circles to see the actual values.
    <br>
    <br>


<div id="mapid" style="width: 1000px; height: 800px;"></div>


<script type="text/javascript" src="maps.js"></script>


</body>
</html>

