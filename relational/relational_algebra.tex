% A simple template for LaTeX documents
% 
% To produce pdf run:
%   $ pdflatex paper.tex 
%


\documentclass[12pt]{article}

% Begin paragraphs with new line
\usepackage{parskip}  

% Change margin size
\usepackage[margin=1in]{geometry}   

% Graphics Example:  (PDF's make for good plots)
\usepackage{graphicx}               
% \centerline{\includegraphics{figure.pdf}}

% subfigures, side by side
\usepackage{subcaption}

% hyperlinks
\usepackage{hyperref}

% Blocks of code
\usepackage{listings}
\lstset{basicstyle=\ttfamily, title=\lstname}
% Insert code like this. replace `plot.R` with file name.
% \lstinputlisting{plot.R}

% Monospaced fonts
%\usepackage{inconsolata}
% GNU \texttt{make} is a nice tool.

% Supports proof environment
\usepackage{amsthm}

% Allows writing \implies and align*
\usepackage{amsmath}

% Allows mathbb{R}
\usepackage{amsfonts}

% Numbers in scientific notation
% \usepackage{siunitx}

% Use tables generated by pandas
\usepackage{booktabs}

% Allows umlaut and non ascii characters
\usepackage[utf8]{inputenc}

% norm and infinity norm
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\inorm}[1]{\left\lVert#1\right\rVert_\infty}

% Statistics essentials
\newcommand{\iid}{\text{ iid }}
\newcommand{\Exp}{\operatorname{E}}
\newcommand{\Var}{\operatorname{Var}}
\newcommand{\Cov}{\operatorname{Cov}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\title{Relational Algebra and R}
\date{\today}
\author{Clark Fitzgerald}
\maketitle

Points to make:

There's a large overlap between many languages / systems to express the
same semantics. For example base R, dplyr, data.table, and SQL.
On the one hand this is fine- different packages compete for users and
drive progress, ie. I've heard beginners say that they appreciate the
consistency and mental model of dplyr.  On the other hand, if they're doing
the same thing then there's redundancy here.  Why not share implementation?
We should use the fastest one available, especially for large data sets.

I see all these big highly engineered data processing systems mostly coming
from Apache: Hive, Spark, Cassandra, etc. Then there's R, which is
expressive and fast on data that fits in memory on a single machine.
I'm interested in having the best of both worlds. I want the expressiveness
of R code and the scale of these big systems.

Most academic researchers don't have the opportunity to work with
these kinds of large systems. It often takes significant effort to
configure and maintain them, and it's probably not worth it until you're
trying to analyze TB of data.


\section{Introduction}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Wed Mar  7 09:37:11 PST 2018

Does Calcite use true relational algebra or the multiset version as in SQL,
which allows duplicate rows? More likely the latter. I should find out
with an experiment. This will make me more familiar with the library, too.



Thinking about translating R into relational algebra.
This abstracts R code into a semantic representation with some well
developed theory behind it.

In relational algebras the domain is tables. The differences between an R
data frame and a table in relational algebra are:

\begin{enumerate}
    \item R data frame has ordered columns and rows (unlike SQL)
    \item R data frame allows duplicate rows (like SQL)
\end{enumerate}

To do symbolic manipulation of code we really need some kind of algebra.
Otherwise everything is ad hoc rules.



\begin{table}[]
\centering
    \caption{Correspondence between R data frame functions and relational algebra}
\label{tab-correspond}
\begin{tabular}{llll}
    \textbf{relational algebra} & \textbf{R language}
    \\
\hline
    $A \cup B$              & \texttt{rbind(A, B)}  \\
    $\bigcup_{i=1}^n A_i$   & \texttt{rbind(A1, ..., An)}   \\
\end{tabular}
\end{table}


Cite sqldf, relation and rquery packages

\end{document}
